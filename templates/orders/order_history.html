{% extends 'base.html' %}
{% load static %}
{% block content %}
<div class="container py-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="fw-bold m-0">سجل الطلبات</h2>
        <button id="orders-refresh" class="btn btn-outline-info rounded-pill">
            <i class="fa-solid fa-rotate me-1"></i> تحديث
        </button>
    </div>

    <div class="card border-0 shadow-sm p-3 mb-3" style="border-radius:16px;">
        <div class="row g-2 align-items-end">
            <div class="col-12 col-md-6">
                <label class="form-label small text-muted mb-1" for="orders-q">بحث/تتبع</label>
                <input id="orders-q" type="text" class="form-control" placeholder="اكتب رقم الطلب (مثال: 123)" inputmode="numeric" />
            </div>
            <div class="col-6 col-md-3 d-grid">
                <button id="orders-search" type="button" class="btn btn-outline-secondary rounded-pill">
                    <i class="fa-solid fa-magnifying-glass me-1"></i> بحث
                </button>
            </div>
            <div class="col-6 col-md-3 d-grid">
                <button id="orders-track" type="button" class="btn btn-info text-white rounded-pill" style="background:#00BCD4;border-color:#00BCD4;">
                    <i class="fa-solid fa-location-crosshairs me-1"></i> تتبع
                </button>
            </div>
        </div>
        <div class="small text-muted mt-2">زر "بحث" يعرض الطلب داخل السجل، وزر "تتبع" يفتح صفحة تتبع الطلب مباشرة.</div>
    </div>

    <div id="order-history-skeleton" class="d-none">
        <div class="list-group">
            <div class="list-group-item mb-2" style="border-radius: 14px;">
                <div class="d-flex justify-content-between">
                    <div class="skeleton-text" style="height:16px;width:35%;"></div>
                    <div class="skeleton-text" style="height:14px;width:20%;"></div>
                </div>
                <div class="skeleton-text mt-3" style="height:14px;width:40%;"></div>
                <div class="skeleton-text mt-2" style="height:12px;width:30%;"></div>
            </div>
            <div class="list-group-item mb-2" style="border-radius: 14px;">
                <div class="d-flex justify-content-between">
                    <div class="skeleton-text" style="height:16px;width:35%;"></div>
                    <div class="skeleton-text" style="height:14px;width:20%;"></div>
                </div>
                <div class="skeleton-text mt-3" style="height:14px;width:40%;"></div>
                <div class="skeleton-text mt-2" style="height:12px;width:30%;"></div>
            </div>
        </div>
    </div>

    <div id="order-history-list" class="list-group"></div>

    <div id="order-history-empty" class="alert alert-info d-none" style="border-radius: 14px;">لا يوجد طلبات سابقة.</div>

    <div class="text-center mt-4">
        <button id="orders-load-more" class="btn btn-info rounded-pill d-none">عرض المزيد</button>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'frontend/js/order_history.js' %}?v={% now 'U' %}"></script>
{% endblock %}
