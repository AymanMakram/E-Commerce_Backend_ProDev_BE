<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Velo Store</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <style>
        /* لضمان وضوح الاسم فوق الخلفية الداكنة */
        .user-name-highlight {
            color: #00BCD4 !important;
            font-weight: 700;
            text-shadow: 0 0 10px rgba(0, 188, 212, 0.2);
        }
        .bg-cyan {
            background-color: #00BCD4 !important;
        }
        /* أنيميشن بسيط عند تحديث السلة لإشعار المستخدم */
        @keyframes pulse-cyan {
            0% { transform: scale(1); }
            50% { transform: scale(1.3); }
            100% { transform: scale(1); }
        }
        .badge-update {
            animation: pulse-cyan 0.4s ease-in-out;
        }

        /* Skeletons (loading states) */
        .skeleton { background: #e2e8f0; }
        .skeleton-text { background: #cbd5e1; border-radius: 6px; }
    </style>
    <script>
        // Minimal template-provided config (logic lives in frontend/js/base.js)
        window.VELO_CONFIG = window.VELO_CONFIG || {};
        window.VELO_CONFIG.csrfToken = '{{ csrf_token }}';
        // Backwards-compat for any legacy scripts still reading CART_CONFIG.
        window.CART_CONFIG = window.CART_CONFIG || {
            apiUrl: '/api/cart/',
            itemsApiUrl: '/api/cart/cart-items/',
            csrfToken: '{{ csrf_token }}'
        };
    </script>
</head>
<body style="background-color: #f8fafc;">
    <nav class="navbar navbar-dark" style="background: #0f172a; padding: 15px 0;">
        <div class="container d-flex justify-content-between align-items-center">
            <a id="nav-brand-link" class="navbar-brand fw-bold" href="/products/">
                <span style="background:#00BCD4; padding:2px 8px; border-radius:5px;">V</span> VELO STORE
            </a>
            
            <div class="d-flex align-items-center">
                <a id="nav-products-link" href="/products/" class="nav-link text-white me-3 d-flex align-items-center">
                    <i class="fa-solid fa-store me-2"></i>
                    المنتجات
                </a>

                <a id="nav-orders-link" href="/orders/" class="nav-link text-white me-3 d-flex align-items-center d-none">
                    <i class="fa-solid fa-box me-2"></i>
                    طلباتي
                </a>
                <div id="auth-section" class="me-3">
                    </div>

                <a id="nav-cart-link" href="{% url 'cart_detail' %}" class="nav-link text-white d-flex align-items-center">
                    <i class="fa-solid fa-cart-shopping me-2"></i> 
                    السلة: <span id="cart-count" class="badge bg-cyan ms-1">0</span>
                </a>
            </div>
        </div>
    </nav>

    {% block content %}{% endblock %}

    <!-- Toasts -->
    <div id="toast-container" class="position-fixed bottom-0 end-0 p-3" style="z-index: 1100;"></div>

    <script src="{% static 'frontend/js/api.js' %}?v={% now 'U' %}"></script>
    <script src="{% static 'frontend/js/base.js' %}?v={% now 'U' %}"></script>
    <script src="{% static 'frontend/js/auth.js' %}?v={% now 'U' %}"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    {% block extra_js %}{% endblock %}
</body>
</html>